<!doctype html>
<html class="no-js" lang="zh-tw">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACFklEQVQ4y9WTy2oTYQCFv5l/LpmZpG0mTcc0VqUtJbooiiItWFEquBAXiuDCJxBEdOE+G9GlD6C4EXElUooX6EZLKag7i3hDpbGm2ktq0nQy/9xc1Dfoyu8Bzvk4cJQ0TdkJKjtkxwFKeuMy5DYhl0IhgEID+vrAdUjLU8ybt7VPHLvwuTV83fvGk7Fubu3phe8BzLkxojpxBKwArARECrEGUQCKqivBwYsDvLiL/fOqbhbKC27/5MoynS7JXDkHhlQR1dFx6AnBVEFRAHSU5BJJfA/hXyEeLO9iFt1+jy1cvhS9U7XfRuh2mB3uAlE9eQYcFawQdKUPoUyjh9dAKyFi0G0I+ymEHzGy97EoUuvdPVlfz2Jv8VJUD58A0QI19Eijp4hknCSF2ARSUEKILAiy5OvdWyXtjp/YbWPRPTCx8ie/KqoDxyGSJUKeI41D+BnoZMDXQdoQ6dCS0G5BJ5kx/cr83uThEN1fb/7q6X+ksentRzMeI9UKFuBI0FJQY/ABfwucJchuQKJlWfPyhjwrJqOptYHydF2jMbQPbXEDJdnWloApQW0CPph16ASQetA0JnCaEDrQPm+M1JbQVhqnnxXTD0cJ1sbIxeCrkNkEpwayDa08hCb44l9BpkEzeUNn8C16BW3RheWuSmSZrBcCyIt3oMvt4dpFSLIgox8EI69YPTeD9+A1meU6/iiUFlD+/zP9BcPyz4p5mv3cAAAAAElFTkSuQmCC"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
     <!-- Place this data between the <head> tags of your website -->
    <title>Ξ 擇愛成家 ♥ Ξ</title>
    <meta name="description" content="家 Ξ 是蜃樓海市　Ξ 是掠影浮光 Ξ 是我們寫進青春摺頁中的一撇一捺 Ξ 是想像也只能是想像 Ξ 昨天，我們仔細收藏 Ξ 今天，我們擇愛成家 〉" />

    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Ξ 擇愛成家 ♥ Ξ">
    <meta itemprop="description" content="家 Ξ 是蜃樓海市　Ξ 是掠影浮光 Ξ 是我們寫進青春摺頁中的一撇一捺 Ξ 是想像也只能是想像 Ξ 昨天，我們仔細收藏 Ξ 今天，我們擇愛成家 〉">
    <meta itemprop="image" content="http://kchsu.com/images/share.jpg">

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="http://kchsu.com/images/share.jpg">
    <meta name="twitter:site" content="擇愛成家">
    <meta name="twitter:title" content="Ξ 擇愛成家 ♥ Ξ">
    <meta name="twitter:description" content="家 Ξ 是蜃樓海市　Ξ 是掠影浮光 Ξ 是我們寫進青春摺頁中的一撇一捺 Ξ 是想像也只能是想像 Ξ 昨天，我們仔細收藏 Ξ 今天，我們擇愛成家 〉">
    <meta name="twitter:creator" content="@nelsonhey">
    <!-- Twitter summary card with large image must be at least 280x150px -->
    <meta name="twitter:image:src" content="http://kchsu.com/images/share.jpg">

    <!-- Open Graph data -->
    <meta property="og:title" content="Ξ 擇愛成家 ♥ Ξ" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://kchsu.com/" />
    <meta property="og:image" content="http://kchsu.com/images/share.jpg" />
    <meta property="og:description" content="家 Ξ 是蜃樓海市　Ξ 是掠影浮光 Ξ 是我們寫進青春摺頁中的一撇一捺 Ξ 是想像也只能是想像 Ξ 昨天，我們仔細收藏 Ξ 今天，我們擇愛成家 〉" />
    <meta property="og:site_name" content="擇愛成家" />
    <meta property="fb:admins" content="100001963907858" /> 

    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="/bower_components/fontawesome/css/font-awesome.css" />
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:css styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->

    <!-- build:js scripts/vendor/modernizr.js -->
    <script src="/bower_components/modernizr/modernizr.js"></script>
    <script src="/bower_components/detectizr/src/detectizr.js"></script>
    <!-- endbuild -->
  </head>
  <body>


    <section class="box" style="width:100%;">
      <section class="hide" style="display:block!important;width:100%;">
        <section id="step2" style="width:0;overflow:hidden">a</section>
        <section id="step3" style="width:100%;">
          <aside>
            <h3><span class="name">Nelson Jr Obana</span>的家</h3>
            <aside class="tpl house-home" style="background-size:auto auto">
              <figure class="dialog">
                <span>Hello world</span>
              </figure>
              <figure class="me">
                <i class="dot"><img crossOrigin="Anonymous" src="https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpf1/v/t1.0-1/p200x200/10985268_10206433523184023_5037063332987726923_n.jpg?oh=68c519fc69590d3bf5ec9ab6519fe54e&oe=56377FCC&__gda__=1447932340_fa1a76fbbcbe40c61e571989549ded7f" width="30px"></i>
                
                <span>Nelson Jr Obana</span>
              </figure>
              <ul>
                <li>ZZZZZZ</li>
                <li>NNNNNN</li>
                <li>AAAAAA</li>
                <li>123456</li>
              </ul>
              <span class="road-name">平<br>等<br>二<br>路</span>
              <span class="road-number"><span class="number">99</span><i>號</i></span>
            </aside>
          </aside>
          <div class="clearfix"></div>
          <a class="button" href="javascript:">分享 <i class="fa fa-chevron-right"></i></a>
        </section>
      </section>
    </section>

    <div id='fb-root'></div>


    <!-- build:js scripts/vendor.js -->
    <!-- bower:js -->
    <script src="/bower_components/jquery/dist/jquery.js"></script>
    <script src="/bower_components/gsap/src/uncompressed/TweenMax.js"></script>
    <script src="/bower_components/colorbox/jquery.colorbox.js"></script>
    <script src="/bower_components/lodash/lodash.js"></script>
    <script src="/bower_components/jquery-mousewheel/jquery.mousewheel.js"></script>
    <script src="/bower_components/classie/classie.js"></script>
    <script src="/bower_components/get-style-property/get-style-property.js"></script>
    <script src="/bower_components/get-size/get-size.js"></script>
    <script src="/bower_components/eventie/eventie.js"></script>
    <script src="/bower_components/eventEmitter/EventEmitter.js"></script>
    <script src="/bower_components/unipointer/unipointer.js"></script>
    <script src="/bower_components/unidragger/unidragger.js"></script>
    <script src="/bower_components/draggabilly/draggabilly.js"></script>
    <script src="/bower_components/detectizr/dist/detectizr.js"></script>
    <script src="/bower_components/querystring/querystring.min.js"></script>
    <script src="/bower_components/html2canvas/build/html2canvas.js"></script>
    <script src="/bower_components/bootstrap-maxlength/bootstrap-maxlength.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:js scripts/plugins.js -->
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/affix.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/alert.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/dropdown.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/tooltip.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/modal.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/transition.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/button.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/popover.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/carousel.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/scrollspy.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/collapse.js"></script>
    <script src="/bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/tab.js"></script>
    <!-- endbuild -->

    <script>
    $(function(){
      pic = 'https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpf1/v/t1.0-1/p200x200/10985268_10206433523184023_5037063332987726923_n.jpg?oh=68c519fc69590d3bf5ec9ab6519fe54e&oe=56377FCC&__gda__=1447932340_fa1a76fbbcbe40c61e571989549ded7f';
      html2canvas($('#step3 >aside'), {
        onrendered: function(canvas) {
          addPicture(pic, canvas, function(cvs){
            $('#step3').append('<h4>canvas</h4>');
            $(canvas).css('display','block').css('position','static');
            var img = canvas.toDataURL('image/png');
            var capt = document.createElement('img');
            capt.src=img;
            TweenMax.set(capt,{
              left:0,
              top:0
            });
          // $.post('http://api.kchsu.com/api/Participants/s/100000', {
          //   base64Url : $(capt).attr('src')},function(){
          //   $('#step3 .button').fadeIn();
          // });
            // $(capt).attr('src','http://api.kchsu.com/u/100000.png');
            $('#step3').append('<h4>img</h4>');
            $(capt).appendTo($('#step3'));
          });
        }
      });
      
    });
    function addPicture(pic, canvas, callback)
    {
      var picture = new Image();
      picture.onload = function(){
        var img = document.createElement('canvas');
        img.width = this.width;
        img.height = this.height;
        var ctx = img.getContext('2d');
        ctx.drawImage(this,0,0);
        var draw = new Image ();
        draw.src = img.toDataURL('image/png');      
        var context = canvas.getContext('2d');
        roundedImage(105, 110,38,38,19);
        context.clip();
        context.globalAlpha = 0.3;
        context.drawImage(draw, 105, 110,38,38);
        
        context.restore();
        $('#step3').append(canvas);
        callback(canvas);
        function roundedImage(x,y,width,height,radius){
          context.beginPath();
          context.moveTo(x + radius, y);
          context.lineTo(x + width - radius, y);
          context.quadraticCurveTo(x + width, y, x + width, y + radius);
          context.lineTo(x + width, y + height - radius);
          context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
          context.lineTo(x + radius, y + height);
          context.quadraticCurveTo(x, y + height, x, y + height - radius);
          context.lineTo(x, y + radius);
          context.quadraticCurveTo(x, y, x + radius, y);
          context.closePath();
        }
      }
      picture.crossOrigin = 'anonymous';
      picture.src = pic;
    }
    </script>
</body>
</html>
